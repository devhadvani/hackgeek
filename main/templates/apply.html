{% comment %} {% for user in data%}
{{user.username}}
{{user.email}}
{{user.first_name}}
<hr>
{%endfor%} {% endcomment %}

{% load static %}


<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="{% static 'style.css' %}"> 
</head>

<body>
    <header class="header">

        <a class="navbar-link" href="{% url 'home' %}"   ><p class="logo">HACKGEEK</p></a>
        <nav class="navbar">
          <ul class="navbar-list">
         
            <li>
              <a class="navbar-link" href={% url 'logout_form' %}> log out </a></button></li>
            </li>
        </ul>
            <div class="mobile-navbar-btn2" onclick="expand()">
                <ion-icon name="menu-outline" class="mobile-nav-icon"></ion-icon>
                <ion-icon name="close-outline" class="mobile-nav-icon"></ion-icon>
            </div>
        </nav>

        <div class="mobile-navbar-btn">
            <ion-icon name="menu-outline" class="mobile-nav-icon"></ion-icon>
            <ion-icon name="close-outline" class="mobile-nav-icon"></ion-icon>
        </div>
    </header>





{% comment %} {{data.email}} {% endcomment %}
{% comment %} {{data.first_name}}
{{data.last_name}}
{{topic.title}}
{{toptic.id}} {% endcomment %}

<div class="host-container" >
    <div class="apply-card">


<!-- apply.html -->

{% if messages %}
  <ul class="messages">
    {% for message in messages %}
      <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
    {% endfor %}
  </ul>
{% endif %}

<form action="" method="post">
  {% csrf_token %}
  <div class="flex">
    <p>Project ID</p>
    <input type="text" name="id" value="{{ topic.id }}">
  </div>
  <div class="flex">
    <p>Project Title</p>
    <input type="text" name="title" value="{{ topic.title }}">
  </div>
  <div class="flex">
    <p>Team Leader</p>
    <input type="email" name="t1" placeholder="Check" value="{{ user.email }}" disabled>
  </div>
  <div class="flex">
    <p>Team Member 2</p>
    <input type="email" name="t2" placeholder="Check">
  </div>
  <div class="flex">
    <p>Team Member 3</p>
    <input type="email" name="t3" placeholder="Check">
  </div>
  <div class="flex">
    <input type="submit">
  </div>
</form>




{% comment %} 
<form action="" method="post">
    {% csrf_token %}
    <div class="flex">
        <p>project id</p>
        <input type="text" name="id" value={{topic.id}} >
    </div>
    <div class="flex"> 
         <p>project title</p>
         <input type="text" name="title" value={{topic.title}}>
        </div>
    <div class="flex">  
         <p>leader</p>
         <input type="email" name="t1" placeholder="Check" value={{user.email}} disabled>
        </p>
    </div>
    <div class="flex">
        <p>Team Member 1</p>
        <input type="email" name="t2" id="team-member-1" placeholder="Enter email">
        <button type="button" onclick="checkEmailAvailability(1)">Check Availability</button>
        <span id="availability-message-1"></span>
    </div>
    <div class="flex">
        <p>Team Member 2</p>
        <input type="email" name="t3" id="team-member-2" placeholder="Enter email">
        <button type="button" onclick="checkEmailAvailability(2)">Check Availability</button>
        <span id="availability-message-2"></span>
    </div> {% endcomment %}
     {% comment %} <div class="flex">  
        <p>m1</p>
        <input type="email" name="t2" placeholder="Check">
    </div>
    <div class="flex">  
        <p>m2</p>
        <input type="email" name="t3" placeholder="Check">
    </div> {% endcomment %}
                    {% comment %} <div class="flex">  <input type="submit"></div> {% endcomment %}
</form>
</div>
</div>



<script src="{% static 'script.js' %}"></script>



</div></div></div>


<script>
    function checkEmailAvailability(memberNumber) {
        const emailInput = document.getElementById(`team-member-${memberNumber}`);
        const availabilityMessage = document.getElementById(`availability-message-${memberNumber}`);
        const email = emailInput.value;
    
        // Make an AJAX request to check email availability
        const xhr = new XMLHttpRequest();
        xhr.open("GET", `/check_email_availability/?email=${email}`, true);
        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4 && xhr.status === 200) {
                const response = JSON.parse(xhr.responseText);
                if (response.available) {
                    availabilityMessage.textContent = "Email is available";
                    availabilityMessage.classList.add("available");
                } else {
                    availabilityMessage.textContent = "Email is not available";
                    availabilityMessage.classList.remove("available");
                }
            }
        };
        xhr.send();
    }
</script>

</body></html>